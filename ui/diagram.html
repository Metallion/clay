<!DOCTYPE html>
<html lang="en">
	<head>
		<meta content="text/html; charset=utf-8" http-equiv="content-type">
		<meta charset="utf-8">
		<title>
			Sample GUI
		</title>
		<meta content="Bootply" name="generator">
		<meta content="width=device-width, initial-scale=1, maximum-scale=1" name="viewport">
		<link href="/ui/css/bootstrap.min.css" rel="stylesheet">
		<link href="/ui/css/styles.css" rel="stylesheet">
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js">
		</script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.js">
		</script>
		<script src="/ui/js/inet-henge/vendor/cola.3.1.3.min.js">
		</script>
		<script src="/ui/js/inet-henge/inet-henge.js">
		</script>
	</head>
	<body>
		<div id="diagram_panel"></div>
		<script language="javascript">
			(function($) {

				function getUrlVars() {
					var vars = [],
						hash;
					var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
					for (var i = 0; i < hashes.length; i++) {
						hash = hashes[i].split('=');
						vars.push(hash[0]);
						vars[hash[0]] = hash[1];
					}
					return vars;
				}

				const API_PREFIX = 'http://localhost:8080/v1';
				var diagramType = getUrlVars()["diagram_type"]

				function onUpdateNetworkDiagram() {
					$("#diagram_panel").children().remove();
					$("#diagram_panel").append('<div id="diagram"></div>');

					var distance = null;
					if (diagramType == "physical") {
						distance = function(force) {
							force.jaccardLinkLengths(70, 0.2);
						}
					}
					else {
						distance = function(force) {
							force.jaccardLinkLengths(150, 0.2);
						}
					}
					var diagramInstance = new Diagram('#diagram', API_PREFIX + '/diagrams/' + diagramType, {
						pop: /^([^\s-]+)-/,
						distance: distance,
						width: 1200,
						height: 900
					});
					diagramInstance.init('interface');
				}

				function onLoad() {
					onUpdateNetworkDiagram();
				}

				onLoad();

			})(jQuery);
		</script>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.2/jquery.min.js">
		</script>
		<script src="/ui/js/bootstrap.min.js">
		</script>
	</body>
</html>
